<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
      <!-- Link the main.css file to layout.html with url_for -->
    <link rel="stylesheet" href="{{ url_for('static', filename='collection_display.css') }}">
    <link rel="shortcut icon" href="#" />
      <title>{{ place_name }}</title>
  </head>
  <body>
    {% if in_db %}
        <div class="main">
            <div class="title">
                <div class="inner-width">
                    <div class="viewing">Viewing the Collection for</div>
                    <div class="name">{{ place_name }}</div>
                    <div class="address">at {{ address }}</div>
                </div>
            </div>
            <div class="gallery">
                {% for song, posts in posts_dict.items() %}
                    <div class="album">
                        <audio id="{{ song.song_uri[14:] }}" src="{{ song.song_preview }}"></audio>
                        <img src="{{ song.album_picture }}" class="image" alt="" onmouseover="start('{{ song.song_uri[14:] }}')" onmouseout="stop('{{ song.song_uri[14:] }}')"
                         onclick="playorpause('{{ song.song_uri[14:] }}')">
                    </div>
                {% endfor %}
                <div class="album">
                    <a href="{{ url_for('search_music', place_id=place_id, address=address) }}"><button class="add-button" >Add a song</button></a>
                </div>
            </div>
        </div>
        <script>
            function start(id) {
                var audio = document.getElementById(id);
                audio.play();
            }
            function stop(id) {
                var audio = document.getElementById(id);
                audio.pause();
                audio.currentTime=0;
            }
            function playorpause(id) {
                var audio = document.getElementById(id);
                if (audio.duration > 0 && !audio.paused) {
                    audio.pause();
                } else {
                    audio.play();
                }
            }
        </script>
    {% else %}
        <a href={{ url_for('search_music', place_id=place_id, address=address) }}>Add Song</a>
    {% endif %}

  </body>


